{
  "format_version": "1.20.0",
  "minecraft:entity": {
    "description": {
      "identifier": "dragonmounts:skeleton_dragon_egg",
      "is_spawnable": false,
      "is_summonable": true,
      "is_experimental": false
    },
    "component_groups": {
      "wither": {
        "minecraft:is_shaking": {},
        "minecraft:transformation": {
          "begin_transform_sound": "block.turtle_egg.crack",
          "transformation_sound": "block.turtle_egg.crack",
          "into": "dragonmounts:wither_dragon_egg",
          "delay": {
            "value": 20
          }
        }
      },
      "interact":{
        "minecraft:interact": {
          "interactions": [
            {
              "interact_text": "action.interact.transform_block_dragon_eggs.dragonmounts",
              "on_interact": {
                "filters": {
                  "all_of": [
                    {"test": "is_family","subject": "other","value": "player"},
                    {"test": "is_sneaking","subject": "other","operator": "==","value": true}
                  ]
                },
                "event": "block",
                "target": "self"
              }
            },
            {
              "interact_text": "unlock guidebook",
              "on_interact": {
                "filters": {
                  "all_of": [
                    {"test": "is_family","subject": "other","value": "player"},
                    {"test": "has_equipment", "subject": "other","domain": "hand","value": "dm:guidebook"}
                  ]
                },
                "event": "guidebook",
                "target": "self"
              }
            }
          ]
        }
      },
      "start":{
        "minecraft:interact": {
          "interactions": [
            {
              "on_interact": {
                "event": "hatching",
                "target": "self"
              },
              "interact_text": "Hatch Egg"
            }
          ]
        }
      },
      "hatching": {
        "minecraft:is_ignited": {},
        "minecraft:ageable": {
          "duration": 48000,
            "feed_items": [
              {"item": "minecraft:bone","growth": 0.142857}
            ],
          "grow_up": {
            "event": "hatch",
            "target": "self"
          }
        }
      },
      "baby": {
        "minecraft:is_shaking":{},
        "minecraft:transformation": {
          "begin_transform_sound": "block.turtle_egg.crack",
          "transformation_sound": "block.turtle_egg.crack",
          "into": "dragonmounts:skeleton_dragon<baby>",
          "delay": {
            "value": 60
          }
        }
      },
      "despawn":{
        "minecraft:instant_despawn": {}
      }
    }, 
    "components": {
      "minecraft:is_stackable": {},
      "minecraft:is_collidable": {},
      "minecraft:damage_sensor": {
        "triggers": [
          {
            "on_damage": {
              "filters": {"test": "is_family","subject": "other","value": "lightning"},
              "event": "wither"
            },
          "deals_damage": false
          }
        ]
      },
      "minecraft:loot": {
        "table": "loot_tables/entities/dragonmounts/skeleton.json"
      },
      "minecraft:persistent": {},
      "minecraft:type_family": {
        "family": [ "egg" ]
      },
      "minecraft:health": {
        "value": 125,
        "max": 125
      },
      "minecraft:movement.basic": {
      },
      "minecraft:movement": {
        "value": 0.0
      },
      "minecraft:knockback_resistance": {
        "value": 100,
        "max": 100
      },
      "minecraft:push_through": {
      "value": 0
      },
      "minecraft:scale": {
        "value": 1.0
      },
      "minecraft:collision_box": {
        "width": 1,
        "height": 1
      },
      "minecraft:fire_immune": true,
       "minecraft:pushable": {
        "is_pushable": false,
        "is_pushable_by_piston": true
      },
      "minecraft:physics": {
      }
    },
    "events": {
      "wither": {
        "add": {"component_groups": ["wither"],
        "queue_command": {"command": ["scriptevent dm:guidebook wither_egg"]}}
      },
      "guidebook":{
        "queue_command": {"command": ["scriptevent dm:guidebook skeleton_egg"]}
      },
      "block": {
        "queue_command": {"command": ["scriptevent dm:block skeleton"]}
      },
      "despawn": {
        "add": {"component_groups": ["despawn"]}
      },
      "minecraft:entity_spawned":{
        "add":{"component_groups":["start"]}
      },
      "hatching":{
        "remove": {"component_groups": ["start"]},
        "add":{"component_groups":["hatching","interact"]},
        "queue_command": {"command": ["function nether_egg"]}
        
      },
      "hatch": {
        "remove": {"component_groups": ["hatching"]},
        "add": {"component_groups": ["baby"]}
      }
    }
  }
}
